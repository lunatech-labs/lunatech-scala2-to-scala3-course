# Exploring Opaque type aliases

## Background

In the chapter on Opaque type aliases, we did a quick review of the various features in
Scala that allow us to abstract over certain types without incurring the overhead of
boxing/unboxing. We saw that some of these features (Value classes for example) fail
to achieve this goal under certain circumstances.

In this exercise, you will look at the aforementioned features and have a look at the
generated byte code to see whether boxing occurs or not.

## Steps

- Clone this repo: [Moving from Scala 2 to Scala 3](https://github.com/lunatech-labs/lunatech-scala2-to-scala3-course)

- In the cloned repository, `cd` into the `code-snippets` folder
- This folder holds a multi-project `sbt` build. Load this project into your IDE (IntelliJ
  or VSCode with Metals)
- We will focus on the `opaque-type-aliases` `sbt` project for this exercise

- Start an `sbt` session in the `code-snippets` folder and compile the project

We will now walk through the different features

### Case class wrappers

- Have a look at the source code in the `CaseClasses.scala` file in the `opaquetypelaliases.caseclasses` package
- The Scala compiler has generated class files for this under the `target/scala-3.3.0/classes/opaquetypealiases/caseclasses` folder
- Decompile the different class files using:
    - VSCode with Metals: the `cfr` Java decompiler: right-click on a class file. Select `Metals Analyse Source`/`Show decompiled with CFR`
    - IntelliJ: right-click on a class file. Select `Show Decompiled Class As Java`
- Look at the decompiled code and figure out whether boxing occurs or not.

### Value-class wrappers

- Repeat the same steps for file `ValueClasses.scala` in the `opaquetypelaliases.valueclasses` package

- Repeat for `ParametricPolymorphism.scala` in the `opaquetypelaliases.parametricpolymorphism` package

- Repeat for `Subtyping.scala` in the `opaquetypelaliases.subtyping` package

### Opaque type aliases

- Repeat the same steps for file `UsingTheAliases.scala` in the `opaquetypelaliases.opaquetypealias`
